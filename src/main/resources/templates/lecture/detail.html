<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout/defaultLayout}">
<head>
    <meta charset="UTF-8">
    <title>Teach Me : λ‚΄κ°€ κ³ λ¥΄λ” κ°•μ - κ°•μ μƒμ„Έ</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/lecture/detail.css}">
</head>
<body>
    <div class="content" layout:fragment="content">
        <div class="parent-div">
            <img class="thumbnail" th:src="${lecture.img}"/>
            <h2 style="width: 100%;" class="title" th:text="${lecture.title}"></h2>
            <div style="width: 100%; display: flex; flex-wrap: wrap; justify-content: center;">
                <a th:href="@{${lecture.url}}" class="homepageUrl">
                    <i class="fa-solid fa-arrow-right"></i>
                    &nbsp;&nbsp;
                    ν™νμ΄μ§€ λ°”λ΅κ°€κΈ°
                </a>
                <button id="favor_button" class="like_button" th:unless="${isFavor}" onclick="addFavorList();">
                    <i class="fa-regular fa-heart"></i>
                    &nbsp;&nbsp;
                    μ°
                </button>
                <button id="cancel_favor_button" class="like_button" th:if="${isFavor}" onclick="removeFavorList();">
                    <i class="fa-solid fa-heart"></i>
                    &nbsp;&nbsp;
                    μ°
                </button>
            </div>
            <div th:if="${#strings.equals(lecture.platform, 'fastcampus')}" class="platform_box">
                <div class="fastcampus_image"></div>
                <span class="platform_name">&nbsp;ν¨μ¤νΈμΊ νΌμ¤</span>
                <span class="platform_description"> μ—μ„ μ κ³µν•©λ‹λ‹¤.</span>
                <a href="https://fastcampus.co.kr/" class="platform_link">
                    λ°”λ΅κ°€κΈ°
                    <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </a>
            </div>
            <div th:if="${#strings.equals(lecture.platform, 'inflearn')}" class="platform_box">
                <div class="inflearn_image"></div>
                <span class="platform_name">&nbsp;μΈν”„λ°</span>
                <span class="platform_description"> μ—μ„ μ κ³µν•©λ‹λ‹¤.</span>
                <a href="https://www.inflearn.com/" class="platform_link">
                    λ°”λ΅κ°€κΈ°
                    <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </a>
            </div>
            <div style="width: 80%; margin-top: 50px;">
                <h3 style="font-weight: bolder; color:#555555;">
                    <i class="fa-solid fa-tags"></i>
                    ν‚¤μ›λ“
                </h3>
                <p style="text-align: left; color: #585858; font-size: 15px;">κ°•μ λ‚΄μ©μ„ λ‚νƒ€λ‚΄λ” ν‚¤μ›λ“λ“¤ μ…λ‹λ‹¤.</p>
                <div style="width: 100%">
                    <span th:each="keyword : ${#strings.arraySplit(lecture.keywords, ',')}">
                        <span class="keywords" th:text="${#strings.trim(keyword)}"></span>
                    </span>
                </div>
            </div>
            <div style="width: 80%; color: #666; background-color: #f5f5f7; margin-top: 36px; padding: 24px; border-radius: 8px; font-size: 14px;">
                <span style="font-size: 15px; font-weight: bolder; color: black;">π’λ” λ§μ€ μΈν„°λ„· κ°•μκ°€ κ¶κΈν•μ„Έμ”? π‘€</span>
                <br>
                <br>
                <span>λ³ΈμΈμ μ¤ν‚¬μ„ λ λ²¨μ—… ν•κΈ° μ„ν•΄μ„  μ„±μ¥μ„ μ„ν• μ‹κ°„ ν¬μμ™€ λ°μ…μ΄ ν•„μ”ν•΄μ”.</span>
                <br>
                <span>λ‹¤μ–‘ν• κ°•μ λ¦¬μ¤νΈλ” <a href="/lecture/list" style="color: #007F48; text-decoration: none;">[μ—¬κΈ°]</a>μ—μ„ ν™•μΈν•΄λ³΄μ„Έμ”.</span>
            </div>
            <div style="width: 80%; margin-top: 50px;">
                <h3 style="font-weight: bolder; color:#555555;">
                    <i class="fa-regular fa-calendar-check"></i>
                    μμ—… μ •λ³΄
                </h3>
                <p style="text-align: left; color: #585858; font-size: 15px;">λ³€κ²½κ°€λ¥μ„±μ΄ μμΌλ―€λ΅, μ •ν™•ν• μ •λ³΄λ” ν™νμ΄μ§€μ—μ„ ν™•μΈν•΄μ£Όμ„Έμ”.</p>
                <div class="class_box">
                    <div class="class_box_option">
                        <span class="tag">κ°•μ‚¬μ •λ³΄</span>
                        <span th:each="instructor, iterStat : ${#strings.arraySplit(lecture.instructor, ',')}">
                            <span style="white-space: nowrap; margin-left: 5px;" th:text="${#strings.trim(instructor)}"></span>
                        </span>
                        <span th:if="${#strings.isEmpty(lecture.instructor)}">μ—†μ</span>
                    </div>
                    <div class="class_box_option">
                        <span class="tag">μμ—…μ‹κ°„</span>
                        <span th:with="hours=${lecture.duration / 60}, minutes=${lecture.duration % 60}">
                            <span style="margin-right: 5px;" th:if="${hours > 0}" th:text="${hours} + 'μ‹κ°„ '"></span>
                            <span th:if="${minutes > 0}" th:text="${minutes} + 'λ¶„'"></span>
                        </span>
                    </div>
                    <div class="class_box_option">
                        <span class="tag">ν”λ«νΌ</span>
                        <span th:if="${#strings.equals(lecture.platform, 'fastcampus')}">ν¨μ¤νΈμΊ νΌμ¤</span>
                        <span th:if="${#strings.equals(lecture.platform, 'inflearn')}">μΈν”„λ°</span>
                    </div>
                    <div class="class_box_option">
                        <span class="tag">κ°•μ λ“±λ΅μΌ</span>
                        <span th:text="${#dates.format(lecture.createDate, 'yyyyλ…„ MMμ›” ddμΌ')}"></span>
                    </div>
                    <div class="class_box_option">
                        <span class="tag">μµκ·Ό μ—…λ°μ΄νΈ</span>
                        <span th:text="${#dates.format(lecture.updateDate, 'yyyyλ…„ MMμ›” ddμΌ')}"></span>
                    </div>
                </div>
            </div>
            <div style="width: 80%; margin-top: 50px;">
                <h3 style="font-weight: bolder; color:#555555;">
                    <i class="fa-solid fa-coins"></i>
                    μκ°•λ£ λ° μ •λ³΄
                </h3>
                <div class="money_box">
                    <div class="money_box_option">
                        <span class="tag">μκ°•λ£</span>
                        <span th:if="${lecture.discountPrice < lecture.price}">
                            <span class="before_price" th:text="${#numbers.formatInteger(lecture.price, 3, 'COMMA')}"></span>
                            <span style="margin-right: 5px;">π‘‰</span>
                        </span>
                        <span th:if="${lecture.discountPrice == 0}">
                            <span class="free_price">λ¬΄λ£</span>
                        </span>
                        <span th:if="${lecture.discountPrice != 0}">
                            <span class="price" th:text="${#numbers.formatInteger(lecture.discountPrice, 3, 'COMMA') + 'μ›'}"></span>
                        </span>
                        <span th:if="${lecture.discountPrice < lecture.price}">
                            <span th:if="${lecture.discountPrice == 0}" class="discount_rate">100% ν• μΈ</span>
                            <span th:if="${lecture.discountPrice != 0}" class="discount_rate" th:text="${#numbers.formatDecimal((1 - ((lecture.discountPrice * 1.0) / lecture.price)) * 100, 2, 0) + '% ν• μΈ'}"></span>
                        </span>
                    </div>
                    <div class="money_box_option">
                        <span class="tag">1λ¶„λ‹Ή κ°€κ²©</span>
                        <span th:text="${#numbers.formatDecimal((lecture.discountPrice * 1.0) / lecture.duration, 2, 0, 'COMMA') + 'μ›'}"></span>
                    </div>
                </div>
            </div>
            <div style="width: 80%; margin-top: 50px;">
                <h3 style="font-weight: bolder; color:#555555;">
                    <i class="fa-solid fa-thumbtack"></i>
                    μ¶”κ°€μ„¤λ…
                </h3>
                <p style="text-align: left; color: #585858; font-size: 15px;">ν”λ«νΌμ—μ„ μ κ³µν•λ” μ¶”κ°€ μ„¤λ…μ΄μ—μ”.</p>
                <div style="color: #666; background-color: #f5f5f7; margin-top: 10px; margin-bottom: 30px; padding: 24px; border-radius: 8px; font-size: 14px;">
                    <span style="font-size: 15px; font-weight: bolder; color: black;">μ†κ° λ¬Έκµ¬</span>
                    <br>
                    <br>
                    <span th:text="${lecture.description}"></span>
                </div>
            </div>
            <div style="width: 80%; margin-top: 50px;">
                <h3 style="font-weight: bolder; color:#555555;">
                    <i class="fa-solid fa-comment-dots"></i>
                    λ¦¬λ·°
                </h3>
                <p style="text-align: left; color: #585858; font-size: 15px;">μκ°•μλ“¤μ μƒμƒν• λ¦¬λ·°λ¥Ό ν™•μΈν•μ„Έμ” π§</p>
                <div style="color: #666; background-color: #f5f5f7; margin-top: 10px; margin-bottom: 30px; padding: 24px; border-radius: 8px; font-size: 14px;" th:each="review : ${reviews}">
                    <span style="font-size: 15px; font-weight: bolder; color: black;" th:text="${'π§' + review.member.name}">μ†κ° λ¬Έκµ¬ </span>
                    <span th:text="${'(' + review.score + ')'}"></span>
                    <br>

                    <br>
                    <span th:text="${review.content}"></span>
                </div>
                <div th:if="${#lists.size(reviews.content) == 0}" style="color: #666; background-color: #f5f5f7; margin-top: 10px; margin-bottom: 30px; padding: 24px; border-radius: 8px; font-size: 14px; display: flex; align-items: center; justify-content: center">
                    <p>μ•„μ§ μ‘μ„±λ ν›„κΈ°κ°€ μ—†μµλ‹λ‹¤π­</p>
                </div>
                <nav th:if="${#lists.size(reviews.content) != 0}" aria-label="Page navigation example" style="width: 80%; margin: 0 auto; margin-top:50px;">
                    <ul class="pagination" style="justify-content: center;">
                        <li class="page-item" th:classappend="${reviews.hasPrevious() ? '': 'disabled'}">
                            <a class="page-link" th:href="@{/lecture/{id}(id=${lecture.id}, page=${reviews.number - 1})}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active">
                            <a class="page-link" th:href="@{/lecture/{id}(id=${lecture.id}, page=${reviews.number})}" th:text="${reviews.number + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${reviews.hasNext() ? '': 'disabled'}">
                            <a class="page-link" th:href="@{/lecture/{id}(id=${lecture.id}, page=${reviews.number + 1})}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="rating_box">
                    <div class="rating">
                        β…β…β…β…β…
                        <span class="rating_star">β…β…β…β…β…</span>
                        <input id="review_score" type="range" value="0" step="1" min="0" max="10">
                    </div>
                </div>
                <label style="width: 100%; margin-bottom: 30px; display: flex;">
                    <textarea id="review_text" placeholder="λ‹Ήμ‹ μ λ¦¬λ·°λ¥Ό λ‚¨κ²¨μ£Όμ„Έμ” βοΈ" class="review_area"></textarea>
                    <button id="review_button" class="review_button">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </button>
                </label>
            </div>
        </div>
        <script src="/js/lecture/detail.js"></script>
    </div>
</body>
</html>