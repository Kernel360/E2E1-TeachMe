<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout/defaultLayout}">
<head>
    <meta charset="UTF-8">
    <title>Teach Me : λ‚΄κ°€ κ³ λ¥΄λ” κ°•μ - κ°•μ λ¦¬μ¤νΈ</title>
    <link rel="stylesheet" type="text/css" th:href="@{css}">
</head>
<body>
    <div class="content" layout:fragment="content">
        <form method="get" th:action="@{/lecture/list}" class="search_menu" style="width: 80%; margin: 0 auto; margin-bottom: 50px;">
            <label>
                <input id="fastcampus_check" class="search_check" type="checkbox">
                ν¨μΊ λ§ λ³΄κΈ°
            </label>
            <label>
                <input id="inflearn_check" class="search_check" type="checkbox">
                μΈν”„λ°λ§ λ³΄κΈ°
            </label>
            <input type="hidden" id="search_filter" name="searchFilter" th:value="${param.searchFilter}">
            <label>
                <select id="search_sort" name="searchSort" class="search_sort">
                    <option value="updateDate">μµμ‹  μ</option>
                    <option value="title">κ°€λ‚λ‹¤ μ</option>
                    <option value="salePrice">κ°€κ²© λ‚®μ€ μ</option>
                </select>
            </label>
            <label>
                <select id="search_select" name="searchSelect" class="search_select">
                    <option value="title" th:selected="${param.searchSelect == 'title'}">μ λ©</option>
                    <option value="instructor" th:selected="${param.searchSelect == 'instructor'}">κ°•μ‚¬λ…</option>
                    <option value="keywords" th:selected="${param.searchSelect == 'keywords'}">ν‚¤μ›λ“</option>
                </select>
            </label>
            <label>
                <input id="search_input" name="searchInput" class="search_input" type="text" placeholder="κ²€μƒ‰μ–΄ μ…λ ¥" th:value="${param.searchInput}"/>
            </label>
            <button type="submit" class="search_btn">π”&nbsp;&nbsp;&nbsp;&nbsp;κ²€μƒ‰</button>
        </form>
        <table class="lecture_table">
            <thead>
                <tr>
                    <th></th>
                    <th>κ°•μλ… <span style="color: grey">μƒμ„Έμ •λ³΄ π‘‰μ΄λ¦„ν΄λ¦­</span></th>
                    <th>κ°•μ‚¬</th>
                    <th>μ΄ κ°€κ²©</th>
                    <th>ν”λ«νΌ</th>
                    <th>μ΄ μ‹κ°„</th>
                    <th>ν‚¤μ›λ“</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="lecture : ${lecturePage.body}">
                    <td><img th:src="${lecture.img}" style="width: 150px; height: 90px; border-radius: 10px;" alt="..."></td>
                    <td style="max-width: 200px;"><a class="lecture_title" th:text="${lecture.title}" style="font-weight: bolder; font-size: 13px;"></a></td>
                    <td style="max-width: 130px;">
                        <span th:each="item : ${#strings.arraySplit(lecture.instructor, ',')}">
                            <span class="instructor_name" th:text="${#strings.trim(item)}"></span>
                        </span>
                    </td>
                    <td style="max-width: 100px;">
                        <span class="sale_notice" th:if="${lecture.discountPrice < lecture.price}">
                            ν• μΈμ¤‘π
                            <br>
                        </span>
                        <span class="price_notice" th:text="${lecture.discountPrice == 0 ? 'λ¬΄λ£' : #numbers.formatInteger(lecture.discountPrice, 3, 'COMMA') + '&#8361;'}"></span>
                    </td>
                    <td>
                        <span class="fastcampus_notice" th:if="${#strings.equals(lecture.platform, 'fastcampus')}">ν¨μ¤νΈμΊ νΌμ¤</span>
                        <span class="inflearn_notice" th:if="${#strings.equals(lecture.platform, 'inflearn')}">μΈν”„λ°</span>
                    </td>
                    <td th:with="hours=${lecture.duration / 60}, minutes=${lecture.duration % 60}">
                        <span class="time_notice" th:if="${hours > 0}" th:text="${hours} + 'μ‹κ°„ '"></span>
                        <span class="time_notice" th:if="${minutes > 0}" th:text="${minutes} + 'λ¶„'"></span>
                    </td>
                    <td style="max-width: 130px;">
                        <span th:each="keyword, iterStat : ${#strings.arraySplit(lecture.keywords, ',')}">
                            <span th:if="${iterStat.count <= 3}" class="keyword_notice" th:text="${#strings.trim(keyword)}"></span>
                            <span th:if="${iterStat.count == 3 and iterStat.size > 3}" class="keyword_notice">...</span>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
        <nav aria-label="Page navigation example" style="width: 80%; margin: 0 auto; margin-top:50px; ">
            <ul class="pagination" style="justify-content: center;">
                <li class="page-item" th:classappend="${(lecturePage.pagination.page == 0) ? 'disabled': ''}">
                    <a class="page-link" th:href="@{/lecture/list(page=${lecturePage.pagination.page}, searchFilter=${param.searchFilter}, searchSort=${param.searchSort}, searchSelect=${param.searchSelect}, searchInput=${param.searchInput})}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item active">
                    <a class="page-link" th:href="@{/lecture/list(page=${lecturePage.pagination.page + 1})}" th:text="${lecturePage.pagination.page + 1}"></a>
                </li>
                <li class="page-item" th:classappend="${!(lecturePage.pagination.page + 1 == lecturePage.pagination.totalPage) && (lecturePage.pagination.totalPage != 0) ? '': 'disabled'}">
                    <a class="page-link" th:href="@{/lecture/list(page=${lecturePage.pagination.page + 2}, searchFilter=${param.searchFilter}, searchSort=${param.searchSort}, searchSelect=${param.searchSelect}, searchInput=${param.searchInput})}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
        <script th:src="@{/js/list.js}"></script>
    </div>
</body>
</html>